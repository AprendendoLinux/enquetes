{% extends "base.html" %}

{% block title %}Atenção - E-mail Já Cadastrado{% endblock %}

{% block extra_css %}
<style>
    .card-alert {
        border: none;
        border-radius: 24px;
        box-shadow: 0 15px 40px rgba(0,0,0,0.08);
        background: #fff;
        overflow: hidden;
    }
    
    .icon-wrapper {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3.5rem;
        margin: 0 auto 1.5rem auto;
    }
</style>
{% endblock %}

{% block content %}
<div class="row justify-content-center align-items-center" style="min-height: 60vh;">
    <div class="col-lg-5 col-md-7 col-sm-10">
        
        <div class="card card-alert p-4 p-md-5 text-center">
            
            {% if is_verified %}
                <div class="icon-wrapper bg-primary bg-opacity-10 text-primary">
                    <i class="bi bi-person-check-fill"></i>
                </div>
                
                <h3 class="fw-bold text-dark mb-3">Conta Já Existente</h3>
                
                <p class="text-muted mb-4">
                    O e-mail <strong>{{ email }}</strong> já possui um cadastro ativo em nosso sistema.
                    Você pode fazer login agora mesmo.
                </p>

                <div class="d-grid gap-3">
                    <a href="/login" class="btn btn-dark btn-lg rounded-pill shadow-sm">
                        <i class="bi bi-box-arrow-in-right me-2"></i>Início
                    </a>
                    <a href="/auth/forgot-password" class="btn btn-link text-decoration-none text-muted small">
                        Esqueci minha senha
                    </a>
                </div>

            {% else %}
                <div class="icon-wrapper bg-dark bg-opacity-10 text-dark">
                    <i class="bi bi-envelope-exclamation-fill"></i>
                </div>
                
                <h3 class="fw-bold text-dark mb-3">Cadastro Não Confirmado</h3>
                
                <p class="text-muted mb-4">
                    Você já iniciou um cadastro com o e-mail <strong>{{ email }}</strong>, mas ele ainda não foi ativado.
                    Precisamos que você confirme seu e-mail para continuar.
                </p>

                <div class="d-grid gap-3">
                    <form action="/auth/resend-verification" method="post">
                        <input type="hidden" name="email" value="{{ email }}">
                        <button type="submit" class="btn btn-dark btn-lg rounded-pill shadow-sm w-100 fw-bold">
                            <i class="bi bi-send-fill me-2"></i>Reenviar Confirmação
                        </button>
                    </form>
                    
                    <a href="javascript:history.back()" class="btn btn-outline-secondary rounded-pill border-0">
                        Voltar e corrigir e-mail
                    </a>
                </div>
            {% endif %}

        </div>

    </div>
</div>
{% endblock %}